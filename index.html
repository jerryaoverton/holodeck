<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>The Holodeck</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
        <script src="js/OrbitControls.js"></script>
		<script>
			var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

            var renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            document.body.appendChild( renderer.domElement );
            
            //handle window resizing
            function resize_scene(){
                var width = window.innerWidth;
                var height = window.innerHeight;
                renderer.setSize(width, height)
                
                camera.aspect = width/height
                camera.updateProjectionMatrix()
            };
            window.addEventListener('resize', resize_scene);
            
            //add navigation control
            controls = new THREE.OrbitControls( camera, renderer.domElement );
            
            //holodeck
            var holo_dimension = 5000
            var holo_geometry = new THREE.CubeGeometry( holo_dimension, holo_dimension, holo_dimension );
            
            var holo_env = "darkskies/"
            var holo_materials = [
                new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( holo_env + "ft.jpg" ), side: THREE.DoubleSide }), //front side
                new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( holo_env + 'bk.jpg' ), side: THREE.DoubleSide }), //back side
                new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( holo_env + 'up.jpg' ), side: THREE.DoubleSide }), //up side
                new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( holo_env + 'dn.jpg' ), side: THREE.DoubleSide }), //down side
                new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( holo_env + 'rt.jpg' ), side: THREE.DoubleSide }), //right side
                new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load( holo_env + 'lf.jpg' ), side: THREE.DoubleSide }) //left side
            ];
            var holo_material = new THREE.MeshFaceMaterial( holo_materials );
            var holodeck = new THREE.Mesh( holo_geometry, holo_material );
            scene.add( holodeck );
            
            //office
            var office_dimension = 1000
            var office_geometry = new THREE.CubeGeometry(office_dimension, office_dimension, office_dimension)
            var office_material = new THREE.MeshBasicMaterial( { color: 0x666666, transparent: true, opacity: 0.5, wireframe: false  } );
            var office = new THREE.Mesh(office_geometry, office_material)
            scene.add(office)
            
            // lighting
            var ambientLight = new THREE.AmbientLight( 0xFFFFFF, 0.3 );
            scene.add( ambientLight );

            // camera Position
            camera.position.z = 3;
            
            //game logic
            function update(){
                holodeck.rotation.y += 0.001;
            }
            
            //draw scene
            function render(){
                renderer.render( scene, camera );
            }
            
            //run game loop (update, render, repeat)
            function game_loop() {
                requestAnimationFrame( game_loop );
                update()
                render()
            }
            
            game_loop();
            
		</script>
	</body>
</html>